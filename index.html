<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz de Vocabulario Latino y Griego</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // URL de tu Google Apps Script
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxD7M5_YHQc5-tIidWFVjQJucge6xWNhedZ6mIrjEVScLFoXBx3kh_lV27dshVF5QA2zA/exec';

        const LatinQuizGame = () => {
            const [screen, setScreen] = useState('login');
            const [groups, setGroups] = useState([
                { id: 1, name: '', password: '', score: 0, loggedIn: false },
                { id: 2, name: '', password: '', score: 0, loggedIn: false },
                { id: 3, name: '', password: '', score: 0, loggedIn: false }
            ]);
            const [currentGroup, setCurrentGroup] = useState(1);
            const [questions, setQuestions] = useState([]);
            const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);
            const [selectedAnswer, setSelectedAnswer] = useState(null);
            const [timeLeft, setTimeLeft] = useState(20);
            const [showFeedback, setShowFeedback] = useState(false);

            useEffect(() => {
                if (screen === 'playing' && !showFeedback && timeLeft > 0) {
                    const timer = setTimeout(() => setTimeLeft(timeLeft - 1), 1000);
                    return () => clearTimeout(timer);
                }
                if (timeLeft === 0 && !showFeedback) {
                    handleTimeout();
                }
            }, [timeLeft, screen, showFeedback]);

            const handleLogin = (groupId, name, password) => {
                const updatedGroups = groups.map(g => 
                    g.id === groupId ? { ...g, name, password, loggedIn: true } : g
                );
                setGroups(updatedGroups);
                
                if (updatedGroups.every(g => g.loggedIn)) {
                    setScreen('waiting');
                }
            };

            const loadQuestions = async () => {
                console.log('Intentando cargar preguntas...');
                try {
                    const response = await fetch(`${SCRIPT_URL}?action=getQuestions`);
                    const data = await response.json();
                    
                    if (data && data.length > 0) {
                        console.log('Preguntas cargadas desde Google Sheets:', data.length);
                        setQuestions(data);
                        setScreen('playing');
                    } else {
                        throw new Error('No se pudieron cargar las preguntas');
                    }
                } catch (error) {
                    console.error('Error al cargar preguntas:', error);
                    const exampleQuestions = [
                        {
                            id: 1,
                            question: "¬øCu√°l es el √©timo latino de 'oculista'?",
                            options: ["oculus, i", "caput, capitis", "dens, dentis", "pes, pedis"],
                            correct: 0,
                            explanation: "Oculus, i significa 'ojo' en lat√≠n"
                        },
                        {
                            id: 2,
                            question: "¬øQu√© significa el sufijo griego '-itis'?",
                            options: ["dolor", "inflamaci√≥n", "enfermedad", "estudio"],
                            correct: 1,
                            explanation: "-itis significa inflamaci√≥n"
                        },
                        {
                            id: 3,
                            question: "Un carn√≠_____ es un animal que come carne. Completa con:",
                            options: ["fero", "voro", "cida", "ducto"],
                            correct: 1,
                            explanation: "'voro' significa 'que come'"
                        },
                        {
                            id: 4,
                            question: "¬øCu√°ntos lados tiene un hex√°gono?",
                            options: ["5", "6", "7", "8"],
                            correct: 1,
                            explanation: "'hex' es el numeral griego para 6"
                        },
                        {
                            id: 5,
                            question: "¬øQu√© parte del cuerpo afecta la 'cardiopat√≠a'?",
                            options: ["cabeza", "ri√±√≥n", "coraz√≥n", "pulm√≥n"],
                            correct: 2,
                            explanation: "'card√≠a' significa coraz√≥n en griego"
                        },
                        {
                            id: 6,
                            question: "R.I.P. significa:",
                            options: ["Requiescat in pace", "Rex in perpetuum", "Res in pacto", "Roma in pugna"],
                            correct: 0,
                            explanation: "Requiescat in pace = Descanse en paz"
                        },
                        {
                            id: 7,
                            question: "¬øQu√© n√∫mero representa 'deka' en griego?",
                            options: ["5", "10", "12", "100"],
                            correct: 1,
                            explanation: "'deka' es 10 en griego"
                        },
                        {
                            id: 8,
                            question: "'Sine die' significa:",
                            options: ["Con fecha", "Sin d√≠a/fecha", "Cada d√≠a", "Un d√≠a"],
                            correct: 1,
                            explanation: "'Sine die' = sin fijar una fecha"
                        },
                        {
                            id: 9,
                            question: "El √©timo griego de 'dermatitis' es:",
                            options: ["derma, dermatos", "dentes, dentis", "demo, demos", "deka, dekas"],
                            correct: 0,
                            explanation: "'derma' significa piel en griego"
                        },
                        {
                            id: 10,
                            question: "¬øQu√© significa 'motu proprio'?",
                            options: ["Con mucho movimiento", "Por propia iniciativa", "Sin motivo", "En movimiento"],
                            correct: 1,
                            explanation: "'Motu proprio' = por propia iniciativa"
                        }
                    ];
                    console.log('Usando preguntas de ejemplo');
                    alert('‚ö†Ô∏è No se pudieron cargar las preguntas desde Google Sheets. Usando preguntas de ejemplo.');
                    setQuestions(exampleQuestions);
                    setScreen('playing');
                }
            };

            const handleAnswer = (answerIndex) => {
                if (showFeedback) return;
                setSelectedAnswer(answerIndex);
                
                const isCorrect = questions[currentQuestionIndex].correct === answerIndex;
                if (isCorrect) {
                    const updatedGroups = groups.map(g => 
                        g.id === currentGroup ? { ...g, score: g.score + 10 } : g
                    );
                    setGroups(updatedGroups);
                }
                
                setShowFeedback(true);
                setTimeout(() => nextQuestion(), 3000);
            };

            const handleTimeout = () => {
                setShowFeedback(true);
                setTimeout(() => nextQuestion(), 2000);
            };

            const nextQuestion = () => {
                if (currentQuestionIndex < questions.length - 1) {
                    setCurrentQuestionIndex(currentQuestionIndex + 1);
                    setSelectedAnswer(null);
                    setShowFeedback(false);
                    setTimeLeft(20);
                    setCurrentGroup(currentGroup === 3 ? 1 : currentGroup + 1);
                } else {
                    setScreen('results');
                }
            };

            const resetGame = () => {
                setScreen('login');
                setGroups([
                    { id: 1, name: '', password: '', score: 0, loggedIn: false },
                    { id: 2, name: '', password: '', score: 0, loggedIn: false },
                    { id: 3, name: '', password: '', score: 0, loggedIn: false }
                ]);
                setCurrentGroup(1);
                setQuestions([]);
                setCurrentQuestionIndex(0);
                setSelectedAnswer(null);
                setTimeLeft(20);
                setShowFeedback(false);
            };

            if (screen === 'login') {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900 p-8">
                        <div className="max-w-4xl mx-auto">
                            <div className="text-center mb-12">
                                <h1 className="text-5xl font-bold text-white mb-4">üèõÔ∏è Quiz Latino y Griego</h1>
                                <p className="text-xl text-blue-200">Competici√≥n de Vocabulario Cl√°sico</p>
                            </div>

                            <div className="grid md:grid-cols-3 gap-6">
                                {groups.map(group => (
                                    <LoginCard 
                                        key={group.id} 
                                        group={group} 
                                        onLogin={handleLogin}
                                    />
                                ))}
                            </div>

                            {groups.every(g => g.loggedIn) && (
                                <div className="text-center mt-8">
                                    <button
                                        onClick={loadQuestions}
                                        className="bg-green-500 hover:bg-green-600 text-white px-8 py-4 rounded-lg text-xl font-bold inline-flex items-center gap-2 transition-all transform hover:scale-105"
                                    >
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                                            <polygon points="5 3 19 12 5 21 5 3"></polygon>
                                        </svg>
                                        ¬°Comenzar Juego!
                                    </button>
                                </div>
                            )}
                        </div>
                    </div>
                );
            }

            if (screen === 'waiting') {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900 p-8 flex items-center justify-center">
                        <div className="text-center">
                            <h2 className="text-4xl font-bold text-white mb-8">Preparando preguntas...</h2>
                            <div className="animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-white mx-auto"></div>
                        </div>
                    </div>
                );
            }

            if (screen === 'playing' && questions.length > 0) {
                const question = questions[currentQuestionIndex];
                const activeGroup = groups.find(g => g.id === currentGroup);

                return (
                    <div className="min-h-screen bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900 p-8">
                        <div className="max-w-6xl mx-auto">
                            <div className="bg-white bg-opacity-10 backdrop-blur-md rounded-lg p-4 mb-6">
                                <div className="grid grid-cols-3 gap-4">
                                    {groups.map(group => (
                                        <div 
                                            key={group.id}
                                            className={`p-4 rounded-lg text-center transition-all ${
                                                group.id === currentGroup 
                                                    ? 'bg-yellow-400 text-black transform scale-105' 
                                                    : 'bg-white bg-opacity-20 text-white'
                                            }`}
                                        >
                                            <div className="font-bold text-lg">{group.name}</div>
                                            <div className="text-2xl font-bold">{group.score} pts</div>
                                        </div>
                                    ))}
                                </div>
                            </div>

                            <div className="bg-white rounded-2xl shadow-2xl p-8 mb-6">
                                <div className="flex justify-between items-center mb-6">
                                    <div className="text-sm text-gray-600">
                                        Pregunta {currentQuestionIndex + 1} de {questions.length}
                                    </div>
                                    <div className={`flex items-center gap-2 px-4 py-2 rounded-full font-bold ${
                                        timeLeft <= 5 ? 'bg-red-100 text-red-600' : 'bg-blue-100 text-blue-600'
                                    }`}>
                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <polyline points="12 6 12 12 16 14"></polyline>
                                        </svg>
                                        {timeLeft}s
                                    </div>
                                </div>

                                <div className="mb-2 text-sm text-purple-600 font-semibold">
                                    Turno de: {activeGroup.name}
                                </div>

                                <h2 className="text-3xl font-bold text-gray-800 mb-8">
                                    {question.question}
                                </h2>

                                <div className="grid grid-cols-1 gap-4">
                                    {question.options.map((option, index) => (
                                        <button
                                            key={index}
                                            onClick={() => handleAnswer(index)}
                                            disabled={showFeedback}
                                            className={`p-6 rounded-xl text-left text-lg font-medium transition-all ${
                                                showFeedback
                                                    ? index === question.correct
                                                        ? 'bg-green-500 text-white'
                                                        : index === selectedAnswer
                                                        ? 'bg-red-500 text-white'
                                                        : 'bg-gray-200 text-gray-600'
                                                    : 'bg-blue-50 hover:bg-blue-100 text-gray-800 cursor-pointer'
                                            }`}
                                        >
                                            <span className="font-bold mr-3">
                                                {String.fromCharCode(65 + index)}.
                                            </span>
                                            {option}
                                        </button>
                                    ))}
                                </div>

                                {showFeedback && (
                                    <div className={`mt-6 p-4 rounded-lg ${
                                        selectedAnswer === question.correct ? 'bg-green-100' : 'bg-orange-100'
                                    }`}>
                                        <p className="font-medium text-gray-800">
                                            {question.explanation}
                                        </p>
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                );
            }

            if (screen === 'results') {
                const sortedGroups = [...groups].sort((a, b) => b.score - a.score);

                return (
                    <div className="min-h-screen bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900 p-8">
                        <div className="max-w-4xl mx-auto">
                            <div className="text-center mb-12">
                                <div className="text-8xl mb-4">üèÜ</div>
                                <h1 className="text-5xl font-bold text-white mb-4">¬°Juego Terminado!</h1>
                            </div>

                            <div className="bg-white rounded-2xl shadow-2xl p-8 mb-6">
                                <h2 className="text-3xl font-bold text-center mb-8 text-gray-800">
                                    üèÜ Clasificaci√≥n Final
                                </h2>
                                
                                {sortedGroups.map((group, index) => (
                                    <div 
                                        key={group.id}
                                        className={`flex items-center justify-between p-6 rounded-xl mb-4 ${
                                            index === 0 ? 'bg-gradient-to-r from-yellow-400 to-yellow-500' :
                                            index === 1 ? 'bg-gradient-to-r from-gray-300 to-gray-400' :
                                            'bg-gradient-to-r from-orange-400 to-orange-500'
                                        }`}
                                    >
                                        <div className="flex items-center gap-4">
                                            <div className="text-4xl font-bold">
                                                {index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : 'ü•â'}
                                            </div>
                                            <div>
                                                <div className="text-2xl font-bold">{group.name}</div>
                                                <div className="text-sm opacity-80">
                                                    {index === 0 ? '¬°Campeones!' : index === 1 ? 'Segundo lugar' : 'Tercer lugar'}
                                                </div>
                                            </div>
                                        </div>
                                        <div className="text-4xl font-bold">{group.score}</div>
                                    </div>
                                ))}
                            </div>

                            <button
                                onClick={resetGame}
                                className="w-full bg-blue-500 hover:bg-blue-600 text-white px-8 py-4 rounded-lg text-xl font-bold transition-all"
                            >
                                Nueva Partida
                            </button>
                        </div>
                    </div>
                );
            }

            return null;
        };

        const LoginCard = ({ group, onLogin }) => {
            const [name, setName] = useState('');
            const [password, setPassword] = useState('');

            const handleSubmit = (e) => {
                e.preventDefault();
                if (name && password) {
                    onLogin(group.id, name, password);
                }
            };

            if (group.loggedIn) {
                return (
                    <div className="bg-green-500 rounded-xl p-6 text-white">
                        <div className="text-center">
                            <div className="text-6xl mb-4">üë•</div>
                            <h3 className="text-2xl font-bold mb-2">{group.name}</h3>
                            <p className="text-green-100">‚úì Conectado</p>
                        </div>
                    </div>
                );
            }

            return (
                <div className="bg-white rounded-xl p-6 shadow-xl">
                    <div className="text-center mb-4">
                        <div className="text-5xl mb-2">üîê</div>
                        <h3 className="text-xl font-bold text-gray-800">Grupo {group.id}</h3>
                    </div>
                    
                    <div className="space-y-4">
                        <input
                            type="text"
                            placeholder="Nombre del grupo"
                            value={name}
                            onChange={(e) => setName(e.target.value)}
                            onKeyPress={(e) => e.key === 'Enter' && handleSubmit(e)}
                            className="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none"
                        />
                        <input
                            type="password"
                            placeholder="Contrase√±a"
                            value={password}
                            onChange={(e) => setPassword(e.target.value)}
                            onKeyPress={(e) => e.key === 'Enter' && handleSubmit(e)}
                            className="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none"
                        />
                        <button
                            onClick={handleSubmit}
                            className="w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-bold transition-all"
                        >
                            Entrar
                        </button>
                    </div>
                </div>
            );
        };

        // Iniciar la aplicaci√≥n
        const rootElement = document.getElementById('root');
        if (rootElement) {
            const root = ReactDOM.createRoot(rootElement);
            root.render(<LatinQuizGame />);
        }
    </script>
</body>
</html>
        const { useState, useEffect } = React;

        // URL de tu Google Apps Script
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxD7M5_YHQc5-tIidWFVjQJucge6xWNhedZ6mIrjEVScLFoXBx3kh_lV27dshVF5QA2zA/exec';

        // Iconos SVG
        const TimerIcon = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="12" r="10"></circle>
                <polyline points="12 6 12 12 16 14"></polyline>
            </svg>
        );

        const TrophyIcon = () => (
            <svg width="96" height="96" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path>
                <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path>
                <path d="M4 22h16"></path>
                <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path>
                <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path>
                <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path>
            </svg>
        );

        const UsersIcon = () => (
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
                <circle cx="9" cy="7" r="4"></circle>
                <path d="M22 21v-2a4 4 0 0 0-3-3.87"></path>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
            </svg>
        );

        const LogInIcon = () => (
            <svg width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path>
                <polyline points="10 17 15 12 10 7"></polyline>
                <line x1="15" y1="12" x2="3" y2="12"></line>
            </svg>
        );

        const PlayIcon = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polygon points="5 3 19 12 5 21 5 3"></polygon>
            </svg>
        );

        const LatinQuizGame = () => {
            const [screen, setScreen] = useState('login');
            const [groups, setGroups] = useState([
                { id: 1, name: '', password: '', score: 0, loggedIn: false },
                { id: 2, name: '', password: '', score: 0, loggedIn: false },
                { id: 3, name: '', password: '', score: 0, loggedIn: false }
            ]);
            const [currentGroup, setCurrentGroup] = useState(1);
            const [questions, setQuestions] = useState([]);
            const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);
            const [selectedAnswer, setSelectedAnswer] = useState(null);
            const [timeLeft, setTimeLeft] = useState(20);
            const [showFeedback, setShowFeedback] = useState(false);

            useEffect(() => {
                if (screen === 'playing' && !showFeedback && timeLeft > 0) {
                    const timer = setTimeout(() => setTimeLeft(timeLeft - 1), 1000);
                    return () => clearTimeout(timer);
                }
                if (timeLeft === 0 && !showFeedback) {
                    handleTimeout();
                }
            }, [timeLeft, screen, showFeedback]);

            const handleLogin = (groupId, name, password) => {
                const updatedGroups = groups.map(g => 
                    g.id === groupId ? { ...g, name, password, loggedIn: true } : g
                );
                setGroups(updatedGroups);
                
                if (updatedGroups.every(g => g.loggedIn)) {
                    setScreen('waiting');
                }
            };

            const loadQuestions = async () => {
                try {
                    const response = await fetch(`${SCRIPT_URL}?action=getQuestions`);
                    const data = await response.json();
                    
                    if (data && data.length > 0) {
                        setQuestions(data);
                        setScreen('playing');
                    } else {
                        throw new Error('No se pudieron cargar las preguntas');
                    }
                } catch (error) {
                    console.error('Error al cargar preguntas:', error);
                    const exampleQuestions = [
                        {
                            id: 1,
                            question: "¬øCu√°l es el √©timo latino de 'oculista'?",
                            options: ["oculus, i", "caput, capitis", "dens, dentis", "pes, pedis"],
                            correct: 0,
                            explanation: "Oculus, i significa 'ojo' en lat√≠n"
                        },
                        {
                            id: 2,
                            question: "¬øQu√© significa el sufijo griego '-itis'?",
                            options: ["dolor", "inflamaci√≥n", "enfermedad", "estudio"],
                            correct: 1,
                            explanation: "-itis significa inflamaci√≥n"
                        },
                        {
                            id: 3,
                            question: "Un carn√≠_____ es un animal que come carne. Completa con:",
                            options: ["fero", "voro", "cida", "ducto"],
                            correct: 1,
                            explanation: "'voro' significa 'que come'"
                        },
                        {
                            id: 4,
                            question: "¬øCu√°ntos lados tiene un hex√°gono?",
                            options: ["5", "6", "7", "8"],
                            correct: 1,
                            explanation: "'hex' es el numeral griego para 6"
                        },
                        {
                            id: 5,
                            question: "¬øQu√© parte del cuerpo afecta la 'cardiopat√≠a'?",
                            options: ["cabeza", "ri√±√≥n", "coraz√≥n", "pulm√≥n"],
                            correct: 2,
                            explanation: "'card√≠a' significa coraz√≥n en griego"
                        },
                        {
                            id: 6,
                            question: "R.I.P. significa:",
                            options: ["Requiescat in pace", "Rex in perpetuum", "Res in pacto", "Roma in pugna"],
                            correct: 0,
                            explanation: "Requiescat in pace = Descanse en paz"
                        },
                        {
                            id: 7,
                            question: "¬øQu√© n√∫mero representa 'deka' en griego?",
                            options: ["5", "10", "12", "100"],
                            correct: 1,
                            explanation: "'deka' es 10 en griego"
                        },
                        {
                            id: 8,
                            question: "'Sine die' significa:",
                            options: ["Con fecha", "Sin d√≠a/fecha", "Cada d√≠a", "Un d√≠a"],
                            correct: 1,
                            explanation: "'Sine die' = sin fijar una fecha"
                        },
                        {
                            id: 9,
                            question: "El √©timo griego de 'dermatitis' es:",
                            options: ["derma, dermatos", "dentes, dentis", "demo, demos", "deka, dekas"],
                            correct: 0,
                            explanation: "'derma' significa piel en griego"
                        },
                        {
                            id: 10,
                            question: "¬øQu√© significa 'motu proprio'?",
                            options: ["Con mucho movimiento", "Por propia iniciativa", "Sin motivo", "En movimiento"],
                            correct: 1,
                            explanation: "'Motu proprio' = por propia iniciativa"
                        }
                    ];
                    alert('‚ö†Ô∏è No se pudieron cargar las preguntas desde Google Sheets. Usando preguntas de ejemplo.');
                    setQuestions(exampleQuestions);
                    setScreen('playing');
                }
            };

            const handleAnswer = (answerIndex) => {
                if (showFeedback) return;
                setSelectedAnswer(answerIndex);
                
                const isCorrect = questions[currentQuestionIndex].correct === answerIndex;
                if (isCorrect) {
                    const updatedGroups = groups.map(g => 
                        g.id === currentGroup ? { ...g, score: g.score + 10 } : g
                    );
                    setGroups(updatedGroups);
                }
                
                setShowFeedback(true);
                setTimeout(() => nextQuestion(), 3000);
            };

            const handleTimeout = () => {
                setShowFeedback(true);
                setTimeout(() => nextQuestion(), 2000);
            };

            const nextQuestion = () => {
                if (currentQuestionIndex < questions.length - 1) {
                    setCurrentQuestionIndex(currentQuestionIndex + 1);
                    setSelectedAnswer(null);
                    setShowFeedback(false);
                    setTimeLeft(20);
                    setCurrentGroup(currentGroup === 3 ? 1 : currentGroup + 1);
                } else {
                    setScreen('results');
                }
            };

            const resetGame = () => {
                setScreen('login');
                setGroups([
                    { id: 1, name: '', password: '', score: 0, loggedIn: false },
                    { id: 2, name: '', password: '', score: 0, loggedIn: false },
                    { id: 3, name: '', password: '', score: 0, loggedIn: false }
                ]);
                setCurrentGroup(1);
                setQuestions([]);
                setCurrentQuestionIndex(0);
                setSelectedAnswer(null);
                setTimeLeft(20);
                setShowFeedback(false);
            };

            if (screen === 'login') {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900 p-8">
                        <div className="max-w-4xl mx-auto">
                            <div className="text-center mb-12">
                                <h1 className="text-5xl font-bold text-white mb-4">üèõÔ∏è Quiz Latino y Griego</h1>
                                <p className="text-xl text-blue-200">Competici√≥n de Vocabulario Cl√°sico</p>
                            </div>

                            <div className="grid md:grid-cols-3 gap-6">
                                {groups.map(group => (
                                    <LoginCard 
                                        key={group.id} 
                                        group={group} 
                                        onLogin={handleLogin}
                                    />
                                ))}
                            </div>

                            {groups.every(g => g.loggedIn) && (
                                <div className="text-center mt-8">
                                    <button
                                        onClick={loadQuestions}
                                        className="bg-green-500 hover:bg-green-600 text-white px-8 py-4 rounded-lg text-xl font-bold flex items-center gap-2 mx-auto transition-all transform hover:scale-105"
                                    >
                                        <PlayIcon />
                                        ¬°Comenzar Juego!
                                    </button>
                                </div>
                            )}
                        </div>
                    </div>
                );
            }

            if (screen === 'playing' && questions.length > 0) {
                const question = questions[currentQuestionIndex];
                const activeGroup = groups.find(g => g.id === currentGroup);

                return (
                    <div className="min-h-screen bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900 p-8">
                        <div className="max-w-6xl mx-auto">
                            <div className="bg-white/10 backdrop-blur-md rounded-lg p-4 mb-6">
                                <div className="grid grid-cols-3 gap-4">
                                    {groups.map(group => (
                                        <div 
                                            key={group.id}
                                            className={`p-4 rounded-lg text-center transition-all ${
                                                group.id === currentGroup 
                                                    ? 'bg-yellow-400 text-black transform scale-105' 
                                                    : 'bg-white/20 text-white'
                                            }`}
                                        >
                                            <div className="font-bold text-lg">{group.name}</div>
                                            <div className="text-2xl font-bold">{group.score} pts</div>
                                        </div>
                                    ))}
                                </div>
                            </div>

                            <div className="bg-white rounded-2xl shadow-2xl p-8 mb-6">
                                <div className="flex justify-between items-center mb-6">
                                    <div className="text-sm text-gray-600">
                                        Pregunta {currentQuestionIndex + 1} de {questions.length}
                                    </div>
                                    <div className={`flex items-center gap-2 px-4 py-2 rounded-full font-bold ${
                                        timeLeft <= 5 ? 'bg-red-100 text-red-600' : 'bg-blue-100 text-blue-600'
                                    }`}>
                                        <TimerIcon />
                                        {timeLeft}s
                                    </div>
                                </div>

                                <div className="mb-2 text-sm text-purple-600 font-semibold">
                                    Turno de: {activeGroup.name}
                                </div>

                                <h2 className="text-3xl font-bold text-gray-800 mb-8">
                                    {question.question}
                                </h2>

                                <div className="grid grid-cols-1 gap-4">
                                    {question.options.map((option, index) => (
                                        <button
                                            key={index}
                                            onClick={() => handleAnswer(index)}
                                            disabled={showFeedback}
                                            className={`p-6 rounded-xl text-left text-lg font-medium transition-all transform hover:scale-102 ${
                                                showFeedback
                                                    ? index === question.correct
                                                        ? 'bg-green-500 text-white'
                                                        : index === selectedAnswer
                                                        ? 'bg-red-500 text-white'
                                                        : 'bg-gray-200 text-gray-600'
                                                    : 'bg-blue-50 hover:bg-blue-100 text-gray-800'
                                            }`}
                                        >
                                            <span className="font-bold mr-3">
                                                {String.fromCharCode(65 + index)}.
                                            </span>
                                            {option}
                                        </button>
                                    ))}
                                </div>

                                {showFeedback && (
                                    <div className={`mt-6 p-4 rounded-lg ${
                                        selectedAnswer === question.correct ? 'bg-green-100' : 'bg-orange-100'
                                    }`}>
                                        <p className="font-medium text-gray-800">
                                            {question.explanation}
                                        </p>
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                );
            }

            if (screen === 'results') {
                const sortedGroups = [...groups].sort((a, b) => b.score - a.score);

                return (
                    <div className="min-h-screen bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900 p-8">
                        <div className="max-w-4xl mx-auto">
                            <div className="text-center mb-12">
                                <div className="flex justify-center mb-4">
                                    <TrophyIcon />
                                </div>
                                <h1 className="text-5xl font-bold text-white mb-4">¬°Juego Terminado!</h1>
                            </div>

                            <div className="bg-white rounded-2xl shadow-2xl p-8 mb-6">
                                <h2 className="text-3xl font-bold text-center mb-8 text-gray-800">
                                    üèÜ Clasificaci√≥n Final
                                </h2>
                                
                                {sortedGroups.map((group, index) => (
                                    <div 
                                        key={group.id}
                                        className={`flex items-center justify-between p-6 rounded-xl mb-4 ${
                                            index === 0 ? 'bg-gradient-to-r from-yellow-400 to-yellow-500' :
                                            index === 1 ? 'bg-gradient-to-r from-gray-300 to-gray-400' :
                                            'bg-gradient-to-r from-orange-400 to-orange-500'
                                        }`}
                                    >
                                        <div className="flex items-center gap-4">
                                            <div className="text-4xl font-bold">
                                                {index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : 'ü•â'}
                                            </div>
                                            <div>
                                                <div className="text-2xl font-bold">{group.name}</div>
                                                <div className="text-sm opacity-80">
                                                    {index === 0 ? '¬°Campeones!' : index === 1 ? 'Segundo lugar' : 'Tercer lugar'}
                                                </div>
                                            </div>
                                        </div>
                                        <div className="text-4xl font-bold">{group.score}</div>
                                    </div>
                                ))}
                            </div>

                            <button
                                onClick={resetGame}
                                className="w-full bg-blue-500 hover:bg-blue-600 text-white px-8 py-4 rounded-lg text-xl font-bold transition-all"
                            >
                                Nueva Partida
                            </button>
                        </div>
                    </div>
                );
            }

            return null;
        };

        const LoginCard = ({ group, onLogin }) => {
            const [name, setName] = useState('');
            const [password, setPassword] = useState('');

            const handleSubmit = () => {
                if (name && password) {
                    onLogin(group.id, name, password);
                }
            };

            if (group.loggedIn) {
                return (
                    <div className="bg-green-500 rounded-xl p-6 text-white">
                        <div className="text-center">
                            <div className="flex justify-center mb-4">
                                <UsersIcon />
                            </div>
                            <h3 className="text-2xl font-bold mb-2">{group.name}</h3>
                            <p className="text-green-100">‚úì Conectado</p>
                        </div>
                    </div>
                );
            }

            return (
                <div className="bg-white rounded-xl p-6 shadow-xl">
                    <div className="text-center mb-4">
                        <div className="flex justify-center mb-2">
                            <LogInIcon />
                        </div>
                        <h3 className="text-xl font-bold text-gray-800">Grupo {group.id}</h3>
                    </div>
                    
                    <div className="space-y-4">
                        <input
                            type="text"
                            placeholder="Nombre del grupo"
                            value={name}
                            onChange={(e) => setName(e.target.value)}
                            className="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none"
                        />
                        <input
                            type="password"
                            placeholder="Contrase√±a"
                            value={password}
                            onChange={(e) => setPassword(e.target.value)}
                            className="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none"
                        />
                        <button
                            onClick={handleSubmit}
                            className="w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-bold transition-all"
                        >
                            Entrar
                        </button>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<LatinQuizGame />);
    </script>
</body>
</html>
